package x9;

import D9.a;
import I9.h;
import ja.B;
import ja.C3645a;
import ja.M;
import java.io.EOFException;
import k9.C3717q0;
import k9.L0;
import m9.D;
import q9.C3962B;
import q9.j;
import q9.k;
import q9.l;
import q9.m;
import q9.p;
import q9.v;
import q9.w;
import q9.y;

/* renamed from: x9.f  reason: case insensitive filesystem */
public final class C4184f implements k {

    /* renamed from: u  reason: collision with root package name */
    public static final p f49502u = new C4182d();

    /* renamed from: v  reason: collision with root package name */
    private static final h.a f49503v = new C4183e();

    /* renamed from: a  reason: collision with root package name */
    private final int f49504a;

    /* renamed from: b  reason: collision with root package name */
    private final long f49505b;

    /* renamed from: c  reason: collision with root package name */
    private final B f49506c;

    /* renamed from: d  reason: collision with root package name */
    private final D.a f49507d;

    /* renamed from: e  reason: collision with root package name */
    private final v f49508e;

    /* renamed from: f  reason: collision with root package name */
    private final w f49509f;

    /* renamed from: g  reason: collision with root package name */
    private final C3962B f49510g;

    /* renamed from: h  reason: collision with root package name */
    private m f49511h;

    /* renamed from: i  reason: collision with root package name */
    private C3962B f49512i;

    /* renamed from: j  reason: collision with root package name */
    private C3962B f49513j;

    /* renamed from: k  reason: collision with root package name */
    private int f49514k;

    /* renamed from: l  reason: collision with root package name */
    private a f49515l;

    /* renamed from: m  reason: collision with root package name */
    private long f49516m;

    /* renamed from: n  reason: collision with root package name */
    private long f49517n;

    /* renamed from: o  reason: collision with root package name */
    private long f49518o;

    /* renamed from: p  reason: collision with root package name */
    private int f49519p;

    /* renamed from: q  reason: collision with root package name */
    private g f49520q;

    /* renamed from: r  reason: collision with root package name */
    private boolean f49521r;

    /* renamed from: s  reason: collision with root package name */
    private boolean f49522s;

    /* renamed from: t  reason: collision with root package name */
    private long f49523t;

    public C4184f() {
        this(0);
    }

    private void d() {
        C3645a.h(this.f49512i);
        M.j(this.f49511h);
    }

    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r0v0, resolved type: x9.g} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r1v1, resolved type: x9.c} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r0v1, resolved type: x9.b} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r0v5, resolved type: x9.b} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r0v6, resolved type: x9.b} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r0v13, resolved type: x9.b} */
    /* JADX DEBUG: Multi-variable search result rejected for TypeSearchVarInfo{r4v1, resolved type: x9.b} */
    /* JADX WARNING: Code restructure failed: missing block: B:15:0x004e, code lost:
        if (r0 == null) goto L_0x0051;
     */
    /* JADX WARNING: Code restructure failed: missing block: B:16:0x0051, code lost:
        r0 = null;
     */
    /* JADX WARNING: Multi-variable type inference failed */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private x9.g e(q9.l r12) {
        /*
            r11 = this;
            x9.g r0 = r11.r(r12)
            D9.a r1 = r11.f49515l
            long r2 = r12.getPosition()
            x9.c r1 = q(r1, r2)
            boolean r2 = r11.f49521r
            if (r2 == 0) goto L_0x0018
            x9.g$a r12 = new x9.g$a
            r12.<init>()
            return r12
        L_0x0018:
            int r2 = r11.f49504a
            r2 = r2 & 4
            if (r2 == 0) goto L_0x004a
            if (r1 == 0) goto L_0x002b
            long r2 = r1.g()
            long r0 = r1.d()
        L_0x0028:
            r9 = r0
            r5 = r2
            goto L_0x003f
        L_0x002b:
            if (r0 == 0) goto L_0x0036
            long r2 = r0.g()
            long r0 = r0.d()
            goto L_0x0028
        L_0x0036:
            D9.a r0 = r11.f49515l
            long r2 = l(r0)
            r0 = -1
            goto L_0x0028
        L_0x003f:
            x9.b r0 = new x9.b
            long r7 = r12.getPosition()
            r4 = r0
            r4.<init>(r5, r7, r9)
            goto L_0x0052
        L_0x004a:
            if (r1 == 0) goto L_0x004e
            r0 = r1
            goto L_0x0052
        L_0x004e:
            if (r0 == 0) goto L_0x0051
            goto L_0x0052
        L_0x0051:
            r0 = 0
        L_0x0052:
            r1 = 1
            if (r0 == 0) goto L_0x0060
            boolean r2 = r0.e()
            if (r2 != 0) goto L_0x006c
            int r2 = r11.f49504a
            r2 = r2 & r1
            if (r2 == 0) goto L_0x006c
        L_0x0060:
            int r0 = r11.f49504a
            r0 = r0 & 2
            if (r0 == 0) goto L_0x0067
            goto L_0x0068
        L_0x0067:
            r1 = 0
        L_0x0068:
            x9.g r0 = r11.k(r12, r1)
        L_0x006c:
            return r0
        */
        throw new UnsupportedOperationException("Method not decompiled: x9.C4184f.e(q9.l):x9.g");
    }

    private long g(long j10) {
        return this.f49516m + ((j10 * 1000000) / ((long) this.f49507d.f46548d));
    }

    private g k(l lVar, boolean z10) {
        lVar.l(this.f49506c.d(), 0, 4);
        this.f49506c.P(0);
        this.f49507d.a(this.f49506c.n());
        return new C4179a(lVar.a(), lVar.getPosition(), this.f49507d, z10);
    }

    private static long l(a aVar) {
        if (aVar == null) {
            return -9223372036854775807L;
        }
        int d10 = aVar.d();
        for (int i10 = 0; i10 < d10; i10++) {
            a.b c10 = aVar.c(i10);
            if (c10 instanceof I9.m) {
                I9.m mVar = (I9.m) c10;
                if (mVar.f31810a.equals("TLEN")) {
                    return M.C0(Long.parseLong(mVar.f31822c));
                }
            }
        }
        return -9223372036854775807L;
    }

    private static int m(B b10, int i10) {
        if (b10.f() >= i10 + 4) {
            b10.P(i10);
            int n10 = b10.n();
            if (n10 == 1483304551 || n10 == 1231971951) {
                return n10;
            }
        }
        if (b10.f() < 40) {
            return 0;
        }
        b10.P(36);
        if (b10.n() == 1447187017) {
            return 1447187017;
        }
        return 0;
    }

    private static boolean n(int i10, long j10) {
        if (((long) (i10 & -128000)) == (j10 & -128000)) {
            return true;
        }
        return false;
    }

    /* access modifiers changed from: private */
    public static /* synthetic */ k[] o() {
        return new k[]{new C4184f()};
    }

    /* access modifiers changed from: private */
    public static /* synthetic */ boolean p(int i10, int i11, int i12, int i13, int i14) {
        if ((i11 == 67 && i12 == 79 && i13 == 77 && (i14 == 77 || i10 == 2)) || (i11 == 77 && i12 == 76 && i13 == 76 && (i14 == 84 || i10 == 2))) {
            return true;
        }
        return false;
    }

    private static C4181c q(a aVar, long j10) {
        if (aVar == null) {
            return null;
        }
        int d10 = aVar.d();
        for (int i10 = 0; i10 < d10; i10++) {
            a.b c10 = aVar.c(i10);
            if (c10 instanceof I9.k) {
                return C4181c.a(j10, (I9.k) c10, l(aVar));
            }
        }
        return null;
    }

    private g r(l lVar) {
        B b10 = new B(this.f49507d.f46547c);
        lVar.l(b10.d(), 0, this.f49507d.f46547c);
        D.a aVar = this.f49507d;
        int i10 = 21;
        if ((aVar.f46545a & 1) != 0) {
            if (aVar.f46549e != 1) {
                i10 = 36;
            }
        } else if (aVar.f46549e == 1) {
            i10 = 13;
        }
        int i11 = i10;
        int m10 = m(b10, i11);
        if (m10 == 1483304551 || m10 == 1231971951) {
            i a10 = i.a(lVar.a(), lVar.getPosition(), this.f49507d, b10);
            if (a10 != null && !this.f49508e.a()) {
                lVar.e();
                lVar.h(i11 + 141);
                lVar.l(this.f49506c.d(), 0, 3);
                this.f49506c.P(0);
                this.f49508e.d(this.f49506c.G());
            }
            lVar.j(this.f49507d.f46547c);
            if (a10 == null || a10.e() || m10 != 1231971951) {
                return a10;
            }
            return k(lVar, false);
        } else if (m10 == 1447187017) {
            h a11 = h.a(lVar.a(), lVar.getPosition(), this.f49507d, b10);
            lVar.j(this.f49507d.f46547c);
            return a11;
        } else {
            lVar.e();
            return null;
        }
    }

    private boolean s(l lVar) {
        g gVar = this.f49520q;
        if (gVar != null) {
            long d10 = gVar.d();
            if (d10 != -1 && lVar.g() > d10 - 4) {
                return true;
            }
        }
        try {
            return !lVar.c(this.f49506c.d(), 0, 4, true);
        } catch (EOFException unused) {
            return true;
        }
    }

    private int t(l lVar) {
        a aVar;
        if (this.f49514k == 0) {
            try {
                v(lVar, false);
            } catch (EOFException unused) {
                return -1;
            }
        }
        if (this.f49520q == null) {
            g e10 = e(lVar);
            this.f49520q = e10;
            this.f49511h.q(e10);
            C3962B b10 = this.f49513j;
            C3717q0.b O10 = new C3717q0.b().e0(this.f49507d.f46546b).W(4096).H(this.f49507d.f46549e).f0(this.f49507d.f46548d).N(this.f49508e.f47912a).O(this.f49508e.f47913b);
            if ((this.f49504a & 8) != 0) {
                aVar = null;
            } else {
                aVar = this.f49515l;
            }
            b10.c(O10.X(aVar).E());
            this.f49518o = lVar.getPosition();
        } else if (this.f49518o != 0) {
            long position = lVar.getPosition();
            long j10 = this.f49518o;
            if (position < j10) {
                lVar.j((int) (j10 - position));
            }
        }
        return u(lVar);
    }

    private int u(l lVar) {
        if (this.f49519p == 0) {
            lVar.e();
            if (s(lVar)) {
                return -1;
            }
            this.f49506c.P(0);
            int n10 = this.f49506c.n();
            if (!n(n10, (long) this.f49514k) || D.j(n10) == -1) {
                lVar.j(1);
                this.f49514k = 0;
                return 0;
            }
            this.f49507d.a(n10);
            if (this.f49516m == -9223372036854775807L) {
                this.f49516m = this.f49520q.b(lVar.getPosition());
                if (this.f49505b != -9223372036854775807L) {
                    this.f49516m += this.f49505b - this.f49520q.b(0);
                }
            }
            D.a aVar = this.f49507d;
            this.f49519p = aVar.f46547c;
            g gVar = this.f49520q;
            if (gVar instanceof C4180b) {
                C4180b bVar = (C4180b) gVar;
                bVar.f(g(this.f49517n + ((long) aVar.f46551g)), lVar.getPosition() + ((long) this.f49507d.f46547c));
                if (this.f49522s && bVar.a(this.f49523t)) {
                    this.f49522s = false;
                    this.f49513j = this.f49512i;
                }
            }
        }
        int a10 = this.f49513j.a(lVar, this.f49519p, true);
        if (a10 == -1) {
            return -1;
        }
        int i10 = this.f49519p - a10;
        this.f49519p = i10;
        if (i10 > 0) {
            return 0;
        }
        this.f49513j.f(g(this.f49517n), 1, this.f49507d.f46547c, 0, (C3962B.a) null);
        this.f49517n += (long) this.f49507d.f46551g;
        this.f49519p = 0;
        return 0;
    }

    private boolean v(l lVar, boolean z10) {
        int i10;
        int i11;
        int i12;
        int j10;
        h.a aVar;
        if (z10) {
            i10 = 32768;
        } else {
            i10 = 131072;
        }
        lVar.e();
        if (lVar.getPosition() == 0) {
            if ((this.f49504a & 8) == 0) {
                aVar = null;
            } else {
                aVar = f49503v;
            }
            a a10 = this.f49509f.a(lVar, aVar);
            this.f49515l = a10;
            if (a10 != null) {
                this.f49508e.c(a10);
            }
            i11 = (int) lVar.g();
            if (!z10) {
                lVar.j(i11);
            }
            i12 = 0;
        } else {
            i11 = 0;
            i12 = 0;
        }
        int i13 = i12;
        int i14 = i13;
        while (true) {
            if (!s(lVar)) {
                this.f49506c.P(0);
                int n10 = this.f49506c.n();
                if ((i12 == 0 || n(n10, (long) i12)) && (j10 = D.j(n10)) != -1) {
                    i13++;
                    if (i13 != 1) {
                        if (i13 == 4) {
                            break;
                        }
                    } else {
                        this.f49507d.a(n10);
                        i12 = n10;
                    }
                    lVar.h(j10 - 4);
                } else {
                    int i15 = i14 + 1;
                    if (i14 != i10) {
                        if (z10) {
                            lVar.e();
                            lVar.h(i11 + i15);
                        } else {
                            lVar.j(1);
                        }
                        i13 = 0;
                        i14 = i15;
                        i12 = 0;
                    } else if (z10) {
                        return false;
                    } else {
                        throw L0.a("Searched too many bytes.", (Throwable) null);
                    }
                }
            } else if (i13 <= 0) {
                throw new EOFException();
            }
        }
        if (z10) {
            lVar.j(i11 + i14);
        } else {
            lVar.e();
        }
        this.f49514k = i12;
        return true;
    }

    public void a(long j10, long j11) {
        this.f49514k = 0;
        this.f49516m = -9223372036854775807L;
        this.f49517n = 0;
        this.f49519p = 0;
        this.f49523t = j11;
        g gVar = this.f49520q;
        if ((gVar instanceof C4180b) && !((C4180b) gVar).a(j11)) {
            this.f49522s = true;
            this.f49513j = this.f49510g;
        }
    }

    public void f(m mVar) {
        this.f49511h = mVar;
        C3962B d10 = mVar.d(0, 1);
        this.f49512i = d10;
        this.f49513j = d10;
        this.f49511h.k();
    }

    public boolean h(l lVar) {
        return v(lVar, true);
    }

    public int i(l lVar, y yVar) {
        d();
        int t10 = t(lVar);
        if (t10 == -1 && (this.f49520q instanceof C4180b)) {
            long g10 = g(this.f49517n);
            if (this.f49520q.g() != g10) {
                ((C4180b) this.f49520q).h(g10);
                this.f49511h.q(this.f49520q);
            }
        }
        return t10;
    }

    public void j() {
        this.f49521r = true;
    }

    public C4184f(int i10) {
        this(i10, -9223372036854775807L);
    }

    public C4184f(int i10, long j10) {
        this.f49504a = (i10 & 2) != 0 ? i10 | 1 : i10;
        this.f49505b = j10;
        this.f49506c = new B(10);
        this.f49507d = new D.a();
        this.f49508e = new v();
        this.f49516m = -9223372036854775807L;
        this.f49509f = new w();
        j jVar = new j();
        this.f49510g = jVar;
        this.f49513j = jVar;
    }

    public void release() {
    }
}
